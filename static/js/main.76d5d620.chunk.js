(this.webpackJsonpfood_service=this.webpackJsonpfood_service||[]).push([[0],{3:function(e,t,n){"use strict";var a=n(18),r=n.n(a),c=n(7),i=n(8),l=n(35),o=n.n(l),s=n(9),u=new(function(){function e(){var t=this;Object(c.a)(this,e),this.switchKitchen=function(e){var t=localStorage.getItem("settings");if(-1===(t=null===t?s.a.prefs:JSON.parse(t)).kitchens.indexOf(e))t.kitchens.push(e);else{var n=t.kitchens.indexOf(e);t.kitchens.splice(n,1)}console.log(t),localStorage.setItem("settings",JSON.stringify(t))},this.getPage=function(){var e=new URL(window.location).searchParams.get("page");return null===e?0:+e},this.clearOrder=function(){localStorage.setItem("order",JSON.stringify([{day:t.getWeekDay()}]))},this.getOrder=function(){var e=localStorage.getItem("order");return null===e?[{day:t.getWeekDay()}]:JSON.parse(e)},this.removeFromOrder=function(e){var n=t.getOrder(),a=n.find((function(t){return t.name===e}));if(void 0!==a){n.splice(0,1);var r=n.indexOf(a);n.splice(r,1),n.unshift({day:t.getWeekDay()}),localStorage.setItem("order",JSON.stringify(n))}else console.log("nothing to delete");return n},this.getWeekDay=function(){return new Date(Date.now()).getDay()}}return Object(i.a)(e,[{key:"getLoacalSettings",value:function(){var e=localStorage.getItem("settings");return null===e?s.a.prefs:JSON.parse(e)}},{key:"addToOrder",value:function(e,t){var n,a=localStorage.getItem("order"),r=(n=null===a?[{day:this.getWeekDay()}]:JSON.parse(a)).find((function(e){return"undefined"!==e.day})).day;console.log(r),r!==this.getWeekDay()&&(console.log("order cleared"),n=[{day:this.getWeekDay()}]);var c=n.find((function(t){return t.name===e}));switch(typeof c){case"undefined":n.push({name:e,q:t});break;case"object":var i=n.indexOf(c);n[i].q+=t}localStorage.setItem("order",JSON.stringify(n)),console.log(n)}},{key:"backupSettings",value:function(e){var t=localStorage.getItem("settings");if(null!==t){var n=JSON.parse(t);for(var a in n)e({type:"setPref",payload:[a,n[a]]})}}},{key:"prepareData",value:function(){var e,t,n=this;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(o.a.get("/structure.json").then((function(t){e=t.data})));case 2:return e.map((function(e){-1===e.availableOn.indexOf(n.getWeekDay())&&(e.disabled=!0)})),e.map((function(e){["vegan","diet","gluten_free"].map((function(t){var n;!1===e[n=t]&&!0===s.a.prefs[n]&&(e.disabled=!0)}))})),t=this.getLoacalSettings().kitchens,e.map((function(e){-1!==t.indexOf(e.kitchen)&&(e.disabled=!0)})),a.abrupt("return",e.filter((function(e){return!1===e.disabled})));case 7:case"end":return a.stop()}}),null,this)}}]),e}());t.a=u},38:function(e,t,n){},39:function(e,t,n){e.exports=n(77)},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(34),i=n.n(c),l=(n(44),n(45),n(10)),o=n(19),s=n(11),u=(n(46),n(33)),f=function(e,t){switch(t.type){case"say":return console.log(e),e;case"errase":return e.dishes=[],e;case"changePref":var n=t.payload;return Object.entries(e).map((function(e){"prefs"===e[0]&&Object.entries(e).map((function(e){return"object"===typeof e[1]&&(e[1][n]=!e[1][n]),0}))})),e;case"setPref":var a=Object(u.a)(t.payload),r=a[0],c=a[1];return Object.entries(e).map((function(e){"prefs"===e[0]&&Object.entries(e).map((function(e){"object"===typeof e[1]&&(e[1][r]=c)}))})),e;default:return console.error("".concat(t.type," doesn't support")),e}},m=(n(47),function(){return r.a.createElement("div",{className:"contacts block"},"Contacts!")}),d=n(7),p=n(8),h=n(15),g=n(13),v=n(14),b=n(9),O=(n(48),n(3)),y=function(){var e=Object(a.useState)(O.a.getLoacalSettings().kitchens),t=Object(l.a)(e,2),n=t[0],c=t[1],i=[["it","Italy"],["fr","France"],["ua","Ukraine"],["ru","Russia"],["chn","China"],["usa","America"]].map((function(e){return r.a.createElement("p",{key:e[1]},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:function(){O.a.switchKitchen(e[0]),c(O.a.getLoacalSettings().kitchens)},checked:-1==n.indexOf(e[0])}),e[1]))}));return r.a.createElement("div",{className:""},i)},k=b.a.prefs,E=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).change=function(e){n.props.dispatch({type:"changePref",payload:e}),localStorage.setItem("settings",JSON.stringify(k)),n.setState({key:"value"})},n.state={key:"value",kitchens:O.a.getLoacalSettings().kitchens||[]},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){O.a.backupSettings(this.props.dispatch),this.setState({key:"value"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"prefs block"},Object.entries(k).map((function(t){var n=t[0].charAt(0).toUpperCase()+t[0].slice(1).replace("_"," ");return-1!==["vegan","diet","gluten_free"].indexOf(t[0])&&r.a.createElement("p",{key:t[0]},r.a.createElement("label",null,r.a.createElement("input",{checked:k[t[0]],onChange:function(){return e.change(t[0])},type:"checkbox"}),n))})),r.a.createElement("hr",null),r.a.createElement(y,null))}}]),t}(r.a.Component),S=(n(67),function(e){return r.a.createElement("div",{className:"info block"},r.a.createElement("p",null,"Info!"))}),j=(n(68),function(){return r.a.createElement("div",{className:"main block"},"Main here")}),N=(n(38),n(69),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).viewRef=r.a.createRef(),n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{ref:this.viewRef,className:"preloader"},r.a.createElement("p",null,"LOADING"))}},{key:"componentWillUnmount",value:function(){this.viewRef.current.style.opacity=0}}]),t}(a.Component)),I=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,78))})),C=function(e){return r.a.createElement(a.Suspense,{fallback:r.a.createElement(N,null)},r.a.createElement("div",{className:"menues block"},r.a.createElement(I,{dispatch:e.dispatch})))},x=(n(70),function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(JSON.parse(localStorage.getItem("order"))),o=Object(l.a)(i,2),s=o[0],u=o[1];Object(a.useEffect)((function(){u(JSON.parse(localStorage.getItem("order")))}),[n]);var f=s.map((function(e){if(void 0!==e.name)return r.a.createElement("p",{key:e.name,className:"orderItem"},"".concat(e.name,": ").concat(e.q),r.a.createElement("i",{onClick:function(){m(e.name)}},"x"))})),m=function(e){O.a.removeFromOrder(e),u(O.a.getOrder())},d=r.a.createElement("div",{className:"emptyBasket"},r.a.createElement("p",null,"There is nothing in here quiet yet..."),r.a.createElement("p",null,"Try adding some items to your basket")),p=r.a.createElement("i",{className:"close",onClick:function(){c(!0)}});return r.a.createElement("div",null,r.a.createElement("div",{tabIndex:"0",className:"popup ".concat(1==n?"unvis":"")},p,s.length>1?f:d,r.a.createElement("button",{onClick:function(){O.a.clearOrder(),c(!0)},disabled:1===s.length},"Clear order")),r.a.createElement("div",{onClick:function(){c(!n)},className:"orderCircle ".concat(0==n?"bigCircle":"")}))}),w=(n(71),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleSubmit=function(e){var t=n.input.value;e.preventDefault(),n.setState({searchFor:t})},n.searchFor=function(){var e,t=n.state.items;""!==n.state.searchFor&&(e=t.filter((function(e){return-1!==e.name.indexOf(n.state.searchFor)}))),void 0!==e&&n.setState({searchedItem:e})},n.state={searchFor:"",items:[],searchedItem:{}},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.prepareData().then((function(t){e.setState({items:t})}))}},{key:"render",value:function(){var e=this;return console.log("items",this.state.searchedItem),r.a.createElement("div",{className:"search",onClick:function(){e.searchFor()}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{onClick:this.handleSubmit,htmlFor:"username"},"Search"),r.a.createElement("br",null),r.a.createElement("input",{onInput:function(t){e.handleSubmit(t)},type:"text",name:"username",ref:function(t){return e.input=t}})),Array.from(this.state.searchedItem).map((function(e){return r.a.createElement("p",{key:e.name},e.name)})))}}]),t}(r.a.Component)),D=function(){var e=Object(a.useReducer)(f,b.a),t=Object(l.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)([!1,!1,!1,!1]),i=Object(l.a)(c,2),u=i[0],d=i[1];Object(a.useEffect)((function(){var e=localStorage.getItem("menu");null!=e&&d(JSON.parse(e))}),[]);return r.a.createElement(o.a,null,r.a.createElement("nav",null,r.a.createElement("ul",{className:"menu"},[{to:"/menu",label:"Menues",num:0},{to:"/contacts",label:"Contacts",num:1},{to:"/info",label:"Info",num:2},{to:"/prefs",label:"Preferences",num:3}].map((function(e){return r.a.createElement(o.b,{className:"".concat(!0===u[e.num]?"active":""),onClick:function(){!function(e){var t=[!1,!1,!1,!1];t[e]=!0,d(t),localStorage.setItem("menu",JSON.stringify(t))}(e.num)},to:e.to,key:e.label},r.a.createElement("li",null,e.label," "))})))),r.a.createElement(x,null),r.a.createElement(w,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(j,null)),r.a.createElement(s.a,{path:"/menu"},r.a.createElement(C,{dispatch:n})),r.a.createElement(s.a,{path:"/contacts"},r.a.createElement(m,null)),r.a.createElement(s.a,{path:"/prefs"},r.a.createElement(E,{dispatch:n})),r.a.createElement(s.a,{path:"/info"},r.a.createElement(S,null))))};var J=function(){return r.a.createElement(D,null)};i.a.render(r.a.createElement(J,null),document.getElementById("root"))},9:function(e,t,n){"use strict";t.a={prefs:{pagination:5,vegan:!1,diet:!1,gluten_free:!1,kitchens:[]}}}},[[39,1,2]]]);
//# sourceMappingURL=main.76d5d620.chunk.js.map